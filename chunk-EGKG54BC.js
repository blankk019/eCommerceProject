import{a as q}from"./chunk-L7S2QYTS.js";import{b,c as p,d as h,e as F,f as E,g as f,i as T,k as V,l as L,s as R}from"./chunk-K6OF5756.js";import{l as N}from"./chunk-P4ENQPUO.js";import{c as S}from"./chunk-SBTNA2EE.js";import"./chunk-BOADIA42.js";import{Cb as x,Db as u,Lb as a,Tb as y,Va as s,ca as C,ga as P,hb as d,kb as c,ob as m,qa as g,ra as w,sb as r,tb as n,ub as _,yb as v}from"./chunk-LPR7IXKC.js";function A(t,i){t&1&&(r(0,"p",9),a(1,"Email is Required"),n())}function D(t,i){t&1&&(r(0,"p",9),a(1,"Enter Valid Email"),n())}function H(t,i){if(t&1&&(r(0,"div",6),d(1,A,2,0,"p",9)(2,D,2,0,"p",9),n()),t&2){let e,o=u(2);s(),m((e=o.verifyEmail.get("email"))!=null&&e.getError("required")?1:(e=o.verifyEmail.get("email"))!=null&&e.getError("email")?2:-1)}}function M(t,i){t&1&&_(0,"span",8)}function k(t,i){if(t&1){let e=v();r(0,"form",2),x("ngSubmit",function(){g(e);let l=u();return w(l.verifyEmailSubmit())}),r(1,"div",3)(2,"label",4),a(3,"Email"),n(),_(4,"input",5),d(5,H,3,1,"div",6),n(),r(6,"button",7),a(7," Verify Email "),d(8,M,1,0,"span",8),n()()}if(t&2){let e,o=u();c("formGroup",o.verifyEmail),s(5),m((e=o.verifyEmail.get("email"))!=null&&e.errors&&((e=o.verifyEmail.get("email"))!=null&&e.touched||(e=o.verifyEmail.get("email"))!=null&&e.dirty)?5:-1),s(),c("disabled",o.verifyEmail.invalid||o.verifyEmailLoading),s(2),m(o.verifyEmailLoading?8:-1)}}function I(t,i){t&1&&(r(0,"p",9),a(1,"Code is Required"),n())}function $(t,i){t&1&&(r(0,"p",9),a(1,"Enter Valid Code"),n())}function j(t,i){if(t&1&&(r(0,"div",6),d(1,I,2,0,"p",9)(2,$,2,0,"p",9),n()),t&2){let e,o=u(2);s(),m((e=o.verifyCode.get("resetCode"))!=null&&e.getError("required")?1:(e=o.verifyCode.get("resetCode"))!=null&&e.getError("pattern")?2:-1)}}function U(t,i){t&1&&_(0,"span",8)}function z(t,i){if(t&1){let e=v();r(0,"form",2),x("ngSubmit",function(){g(e);let l=u();return w(l.verifyCodeSubmit())}),r(1,"div",3)(2,"label",10),a(3,"Reset Code"),n(),_(4,"input",11),d(5,j,3,1,"div",6),n(),r(6,"button",7),a(7," Verify Code "),d(8,U,1,0,"span",8),n()()}if(t&2){let e,o=u();c("formGroup",o.verifyCode),s(5),m((e=o.verifyCode.get("resetCode"))!=null&&e.errors&&((e=o.verifyCode.get("resetCode"))!=null&&e.touched||(e=o.verifyCode.get("resetCode"))!=null&&e.dirty)?5:-1),s(),c("disabled",o.verifyCode.invalid||o.verifyCodeLoading),s(2),m(o.verifyCodeLoading?8:-1)}}function B(t,i){t&1&&(r(0,"p",9),a(1,"Email is Required"),n())}function J(t,i){t&1&&(r(0,"p",9),a(1,"Enter Valid Email"),n())}function K(t,i){if(t&1&&(r(0,"div",6),d(1,B,2,0,"p",9)(2,J,2,0,"p",9),n()),t&2){let e,o=u(2);s(),m((e=o.resetPassword.get("email"))!=null&&e.getError("required")?1:(e=o.resetPassword.get("email"))!=null&&e.getError("email")?2:-1)}}function O(t,i){t&1&&(r(0,"p",9),a(1,"New Password is Required"),n())}function Q(t,i){t&1&&(r(0,"p",9),a(1,"Enter Valid Password"),n())}function W(t,i){if(t&1&&(r(0,"div",6),d(1,O,2,0,"p",9)(2,Q,2,0,"p",9),n()),t&2){let e,o=u(2);s(),m((e=o.resetPassword.get("newPassword"))!=null&&e.getError("required")?1:(e=o.resetPassword.get("newPassword"))!=null&&e.getError("pattern")?2:-1)}}function X(t,i){t&1&&_(0,"span",8)}function Y(t,i){if(t&1){let e=v();r(0,"form",2),x("ngSubmit",function(){g(e);let l=u();return w(l.resetPasswordSubmit())}),r(1,"div",3)(2,"label",4),a(3,"Email"),n(),_(4,"input",12),d(5,K,3,1,"div",6),n(),r(6,"div",3)(7,"label",13),a(8,"Password"),n(),_(9,"input",14),d(10,W,3,1,"div",6),n(),r(11,"button",7),a(12," Reset Password "),d(13,X,1,0,"span",8),n()()}if(t&2){let e,o,l=u();c("formGroup",l.resetPassword),s(5),m((e=l.resetPassword.get("email"))!=null&&e.errors&&((e=l.resetPassword.get("email"))!=null&&e.touched||(e=l.resetPassword.get("email"))!=null&&e.dirty)?5:-1),s(5),m((o=l.resetPassword.get("newPassword"))!=null&&o.errors&&((o=l.resetPassword.get("newPassword"))!=null&&o.touched||(o=l.resetPassword.get("newPassword"))!=null&&o.dirty)?10:-1),s(),c("disabled",l.resetPassword.invalid||l.resetPasswordLoading),s(2),m(l.resetPasswordLoading?13:-1)}}var G=class t{_AuthService=C(q);_Router=C(S);_ToastrService=C(N);order=1;verifyEmailLoading=!1;verifyCodeLoading=!1;resetPasswordLoading=!1;verifyEmail=new E({email:new f(null,[p.required,p.email])});verifyCode=new E({resetCode:new f(null,[p.required,p.pattern(/^[0-9]{6}$/)])});resetPassword=new E({email:new f(null,[p.required,p.email]),newPassword:new f(null,[p.required,p.pattern(/^\w{6,}$/)])});verifyEmailSubmit(){let i=this.verifyEmail.get("email")?.value;this.resetPassword.get("email")?.patchValue(i),this.verifyEmailLoading=!0,this._AuthService.setVerifyEmail(this.verifyEmail.value).subscribe({next:e=>{e.statusMsg=="success"&&(this.order=2)},error:e=>{this.verifyEmailLoading=!1,console.log(e)}})}verifyCodeSubmit(){this.verifyCodeLoading=!0,this._AuthService.setVerifyCode(this.verifyCode.value).subscribe({next:i=>{i.status=="Success"&&(this.order=3)},error:i=>{this.verifyCodeLoading=!1,console.log(i)}})}resetPasswordSubmit(){this.resetPasswordLoading=!0,this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:i=>{this._ToastrService.success("Password has been reset successfully!","Cyber"),setTimeout(()=>{localStorage.setItem("userToken",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1500)},error:i=>{this.resetPasswordLoading=!1,console.log(i)}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-forgot-password"]],standalone:!0,features:[y],decls:6,vars:1,consts:[[1,"text-center","text-main","mb-5"],[1,"border","rounded-3","shadow","p-3",3,"formGroup"],[1,"border","rounded-3","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control"],[1,"alert","alert-danger","mt-1"],["type","submit",1,"btn","text-white","d-block","ms-auto","bg-main",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"m-0"],["for","resetCode"],["id","resetCode","type","text","formControlName","resetCode",1,"form-control"],["readonly","","id","email","type","email","formControlName","email",1,"form-control"],["for","newPassword"],["id","newPassword","type","password","formControlName","newPassword",1,"form-control"]],template:function(e,o){e&1&&(r(0,"section")(1,"h1",0),a(2,"Forgot Password"),n(),d(3,k,9,4,"form",1)(4,z,9,4,"form",1)(5,Y,14,5,"form",1),n()),e&2&&(s(3),m(o.order==1?3:o.order==2?4:o.order==3?5:-1))},dependencies:[R,T,b,h,F,V,L]})};export{G as ForgotPasswordComponent};
