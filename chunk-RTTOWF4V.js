import{a as F}from"./chunk-KWE4QISL.js";import{a as E}from"./chunk-N2ZNYAOT.js";import{l as k}from"./chunk-P4ENQPUO.js";import"./chunk-BOADIA42.js";import{Cb as u,Db as d,Lb as r,Mb as I,Nb as _,Ra as x,Tb as T,Va as l,ca as m,e as b,ga as v,hb as w,kb as g,ob as C,qa as p,qb as S,ra as f,rb as W,sb as s,tb as o,ub as c,yb as y}from"./chunk-LPR7IXKC.js";var O=(i,e)=>e._id;function V(i,e){if(i&1){let t=y();s(0,"div",7)(1,"div",8),c(2,"img",9),s(3,"div")(4,"p",10),r(5),o(),s(6,"small",11),r(7),o()()(),s(8,"div",8)(9,"h6",12),r(10),o(),s(11,"button",13),u("click",function(){let a=p(t).$implicit,h=d(2);return f(h.addToCart(a._id))}),c(12,"i",14),r(13," Add to Cart "),o(),s(14,"button",15),u("click",function(){let a=p(t).$implicit,h=d(2);return f(h.deleteFromWishlist(a._id))}),c(15,"i",16),o()()()}if(i&2){let t=e.$implicit;l(2),g("src",t.imageCover,x)("alt",t.title),l(3),_(" ",t.title," "),l(2),I(t.category.name),l(3),_("",t.price," EGP")}}function j(i,e){if(i&1&&S(0,V,16,5,"div",7,O),i&2){let t=d();W(t.wishlistItems)}}function $(i,e){i&1&&(s(0,"div",6),c(1,"i",17),s(2,"p"),r(3,"Your wishlist is empty."),o()())}var D=class i{_WishlistService=m(F);_CartService=m(E);_ToastrService=m(k);wishlistItems=[];subscriptions=new b;ngOnInit(){let e=this._WishlistService.getWishList().subscribe({next:t=>{this.wishlistItems=t.data||[],console.log("Wishlist items fetched:",this.wishlistItems)}});this.subscriptions.add(e)}ngOnDestroy(){this.subscriptions.unsubscribe()}addToCart(e){let t=this._CartService.addToCart(e).subscribe({next:n=>{console.log("Added to cart:",n),this._ToastrService.success(n.message,"cyber"),this.deleteFromWishlist(e)}});this.subscriptions.add(t)}deleteFromWishlist(e){let t=this._WishlistService.deleteFromWishlist(e).subscribe({next:n=>{console.log("Removed from wishlist:",n),this._ToastrService.success(n.message,"cyber"),this.wishlistItems=this.wishlistItems.filter(a=>a._id!==e)}});this.subscriptions.add(t)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=v({type:i,selectors:[["app-wishlist"]],standalone:!0,features:[T],decls:9,vars:1,consts:[[1,"container","my-5"],[1,"row","justify-content-center","align-items-stretch",2,"min-height","70vh"],[1,"col-lg-10","d-flex"],[1,"wishlist-items","p-4","bg-white","rounded","shadow-sm","border","w-100","d-flex","flex-column"],[1,"fw-semibold","mb-4"],[1,"flex-grow-1","overflow-auto"],[1,"text-center","py-5","text-muted"],[1,"wishlist-item","d-flex","justify-content-between","align-items-center","border-bottom","py-3"],[1,"d-flex","align-items-center","gap-3"],[1,"product-image","rounded",2,"width","70px","height","70px","object-fit","contain",3,"src","alt"],[1,"product-title","fw-semibold","mb-1"],[1,"text-muted","d-block"],[1,"fw-semibold","mb-0"],[1,"btn","btn-outline-dark","btn-sm","rounded-3",3,"click"],[1,"fa-solid","fa-cart-plus","me-1"],["title","Remove from Wishlist",1,"btn","btn-link","text-black","p-0",3,"click"],[1,"fa-solid","text-black","fa-trash","fs-5"],[1,"fa-regular","fa-heart","fs-1","d-block","mb-3"]],template:function(t,n){t&1&&(s(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),r(5,"My Wishlist"),o(),s(6,"div",5),w(7,j,2,0)(8,$,4,0,"div",6),o()()()()()),t&2&&(l(7),C(n.wishlistItems.length>0?7:8))}})};export{D as WishlistComponent};
