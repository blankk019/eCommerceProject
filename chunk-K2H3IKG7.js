import{a as G}from"./chunk-LOBVAW64.js";import{b as T,c as f,d as N,e as A,f as k,g as w,i as R,k as q,l as x,s as D}from"./chunk-3EQ36NFA.js";import{l as V}from"./chunk-J2UXMKTY.js";import{c as E,d as L}from"./chunk-AX2TRS6R.js";import{h as y}from"./chunk-6I4EYFNQ.js";import{Db as b,Eb as v,Mb as s,Ub as S,Va as m,Xb as C,ca as _,ga as h,hb as p,kb as c,ob as g,tb as r,ub as o,vb as F}from"./chunk-AHPHJBHB.js";var P=(n,i)=>({"is-valid":n,"is-invalid":i});function M(n,i){n&1&&(r(0,"p",14),s(1,"Email is Required"),o())}function I(n,i){n&1&&(r(0,"p",14),s(1,"Enter Valid Email"),o())}function U(n,i){if(n&1&&(r(0,"div",7),p(1,M,2,0,"p",14)(2,I,2,0,"p",14),o()),n&2){let t,e=v();m(),g((t=e.loginForm.get("email"))!=null&&t.getError("required")?1:(t=e.loginForm.get("email"))!=null&&t.getError("email")?2:-1)}}function $(n,i){n&1&&(r(0,"p",14),s(1,"password is Required"),o())}function z(n,i){n&1&&(r(0,"p",14),s(1,"Enter Valid Password"),o())}function B(n,i){if(n&1&&(r(0,"div",7),p(1,$,2,0,"p",14)(2,z,2,0,"p",14),o()),n&2){let t,e=v();m(),g((t=e.loginForm.get("password"))!=null&&t.getError("required")?1:(t=e.loginForm.get("password"))!=null&&t.getError("pattern")?2:-1)}}function H(n,i){n&1&&F(0,"span",13)}var j=class n{_AuthService=_(G);_Router=_(E);_ToastrService=_(V);isLoading=!1;loginForm=new k({email:new w(null,[f.required,f.email]),password:new w(null,[f.required,f.pattern(/^\w{6,}$/)])});login(){this.loginForm.valid?(this.isLoading=!0,this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:i=>{console.log(i),i.message==="success"&&(this._ToastrService.success("Logged in successfully!","Cyber"),setTimeout(()=>{localStorage.setItem("userToken",i.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1500)),this.isLoading=!1}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=h({type:n,selectors:[["app-login"]],standalone:!0,features:[S],decls:21,vars:13,consts:[[1,"d-flex","justify-content-center","align-items-center"],[1,"auth-form-container"],[1,"text-main","mb-5"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label","fw-semibold"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","mt-1"],["for","password",1,"form-label","fw-semibold"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end"],["routerLink","/forgot-password",1,"link-primary"],["type","submit",1,"btn","text-white","d-block","ms-auto","bg-main",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"m-0"]],template:function(t,e){if(t&1&&(r(0,"section",0)(1,"div",1)(2,"h2",2),s(3,"Login Now :"),o(),r(4,"form",3),b("ngSubmit",function(){return e.login()}),r(5,"div",4)(6,"label",5),s(7,"Email"),o(),F(8,"input",6),p(9,U,3,1,"div",7),o(),r(10,"div",4)(11,"label",8),s(12,"Password"),o(),F(13,"input",9),p(14,B,3,1,"div",7),o(),r(15,"div",10)(16,"a",11),s(17,"Forgot Password?"),o(),r(18,"button",12),s(19,` login
`),p(20,H,1,0,"span",13),o()()()()()),t&2){let l,d,a,u;m(4),c("formGroup",e.loginForm),m(4),c("ngClass",C(7,P,!((l=e.loginForm.get("email"))!=null&&l.errors)&&(((l=e.loginForm.get("email"))==null?null:l.touched)||((l=e.loginForm.get("email"))==null?null:l.dirty)),((l=e.loginForm.get("email"))==null?null:l.errors)&&(((l=e.loginForm.get("email"))==null?null:l.touched)||((l=e.loginForm.get("email"))==null?null:l.dirty)))),m(),g((d=e.loginForm.get("email"))!=null&&d.errors&&((d=e.loginForm.get("email"))!=null&&d.touched||(d=e.loginForm.get("email"))!=null&&d.dirty)?9:-1),m(4),c("ngClass",C(10,P,!((a=e.loginForm.get("password"))!=null&&a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)),((a=e.loginForm.get("password"))==null?null:a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)))),m(),g((u=e.loginForm.get("password"))!=null&&u.errors&&((u=e.loginForm.get("password"))!=null&&u.touched||(u=e.loginForm.get("password"))!=null&&u.dirty)?14:-1),m(4),c("disabled",e.loginForm.invalid||e.isLoading),m(2),g(e.isLoading?20:-1)}},dependencies:[D,R,T,N,A,q,x,y,L]})};export{j as LoginComponent};
