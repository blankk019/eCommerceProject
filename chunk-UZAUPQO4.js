import{b as D,d as q,h as V,r as N}from"./chunk-3EQ36NFA.js";import{a as B}from"./chunk-ZPB4TSYO.js";import{l as A}from"./chunk-J2UXMKTY.js";import{d as j}from"./chunk-AX2TRS6R.js";import{m as F}from"./chunk-6I4EYFNQ.js";import{$b as f,Db as m,Eb as b,Mb as o,Nb as u,Ob as h,Qb as O,Ra as w,Rb as k,Sb as E,Ub as I,Va as s,Wb as T,ac as x,ca as C,e as y,ga as v,kb as _,qa as p,ra as g,rb as S,sb as P,tb as e,ub as n,vb as d,zb as M}from"./chunk-AHPHJBHB.js";var L=(l,a)=>a._id,$=l=>["/checkout",l];function W(l,a){if(l&1){let t=M();e(0,"div",6)(1,"div",19),d(2,"img",20),e(3,"div",21)(4,"p",22),o(5),n(),e(6,"small",23),o(7),n()()(),e(8,"div",24)(9,"div",25)(10,"button",26),m("click",function(){let i=p(t).$implicit,c=b();return g(c.decCount(i.product._id,i.count))}),d(11,"i",27),n(),e(12,"span"),o(13),n(),e(14,"button",26),m("click",function(){let i=p(t).$implicit,c=b();return g(c.incCount(i.product._id,i.count))}),d(15,"i",28),n()(),e(16,"h6",29),o(17),n(),e(18,"button",30),m("click",function(){let i=p(t).$implicit,c=b();return g(c.deleteFromCart(i.product._id))}),d(19,"i",31),n()()()}if(l&2){let t=a.$implicit;s(2),_("src",t.product.imageCover,w)("alt",t.product.title),s(3),h(" ",t.product.title," "),s(2),h("#",t.product._id,""),s(6),u(t.count),s(4),h("$",t.price,"")}}var H=class l{cartItems=[];subtotal=0;estimatedTax=0;shippingHandling=0;total=0;discountCode="";discountApplied=!1;cartId;subscriptions=new y;_cartService=C(B);_ToastrService=C(A);applyDiscount(){this.discountCode==="ANG25OFF"&&(this.discountApplied=!0,this.total*=.75)}decCount(a,t){t>1&&t--;let r=this._cartService.updateCartQuantity(t,a).subscribe({next:i=>{console.log("Cart quantity updated:",i.status),this._ToastrService.success("Product Count Decreased Sucessfully","cyber"),this.cartItems=i.data.products,this.subtotal=i.data.totalCartPrice,this.estimatedTax=this.subtotal*.1,this.total=this.subtotal+this.estimatedTax+this.shippingHandling},error:i=>{console.error("Error updating cart quantity:",i)}});this.subscriptions.add(r)}incCount(a,t){t++;let r=this._cartService.updateCartQuantity(t,a).subscribe({next:i=>{console.log("Cart quantity updated:",i.status),this._ToastrService.success("Product Count Increased Sucessfully","cyber"),this.cartItems=i.data.products,this.subtotal=i.data.totalCartPrice,this.estimatedTax=this.subtotal*.1,this.total=this.subtotal+this.estimatedTax+this.shippingHandling},error:i=>{console.error("Error updating cart quantity:",i)}});this.subscriptions.add(r)}deleteFromCart(a){let t=this._cartService.deleteFromCart(a).subscribe({next:r=>{console.log("Item removed from cart:",r.status),this._ToastrService.success("Product Deleted From Cart Sucessfully","cyber"),this.cartItems=this.cartItems.filter(i=>i.product._id!==a)}});this.subscriptions.add(t)}ngOnInit(){let a=this._cartService.getCart().subscribe({next:t=>{console.log("Cart id fetched:",t.cartId),this.cartId=t.cartId,this.cartItems=t.data.products,this.subtotal=t.data.totalCartPrice,this.estimatedTax=this.subtotal*.1,this.shippingHandling=5,this.total=this.subtotal+this.estimatedTax+this.shippingHandling}});this.subscriptions.add(a)}ngOnDestroy(){this.subscriptions.unsubscribe()}static \u0275fac=function(t){return new(t||l)};static \u0275cmp=v({type:l,selectors:[["app-cart"]],standalone:!0,features:[I],decls:47,vars:13,consts:[[1,"container","my-5"],[1,"row","justify-content-center","align-items-stretch",2,"min-height","70vh"],[1,"col-lg-7","mb-4","mb-lg-0","d-flex"],[1,"cart-items","p-4","bg-white","rounded","shadow-sm","border","w-100","d-flex","flex-column"],[1,"fw-semibold","mb-4"],[1,"flex-grow-1","overflow-auto"],[1,"cart-item"],[1,"col-lg-4","d-flex"],[1,"order-summary","p-4","rounded","shadow-sm","border","bg-light-subtle","w-100","d-flex","flex-column","justify-content-between"],[1,"mb-3"],[1,"form-label","small","text-muted"],["type","text","placeholder","ANG25OFF",1,"form-control","rounded-3",3,"ngModelChange","blur","ngModel"],[1,"input-group"],["type","text","placeholder","Enter Card Number",1,"form-control","rounded-start-3"],[1,"btn","btn-outline-dark","rounded-end-3"],[1,"list-unstyled","small","mb-4","mt-4"],[1,"d-flex","justify-content-between","mb-2"],[1,"d-flex","justify-content-between","fw-semibold"],[1,"btn","btn-dark","w-100","py-2","rounded-3","fw-semibold",3,"routerLink"],[1,"cart-item-info"],[1,"product-image",3,"src","alt"],[1,"product-details"],[1,"product-title","fw-semibold"],[1,"text-muted","d-block"],[1,"cart-item-actions"],[1,"quantity-controls"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"fa-solid","fa-minus"],[1,"fa-solid","fa-plus"],[1,"fw-semibold"],[1,"btn","btn-link","text-dark",3,"click"],[1,"fa-solid","fa-trash"]],template:function(t,r){t&1&&(e(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),o(5,"Shopping Cart"),n(),e(6,"div",5),S(7,W,20,6,"div",6,L),n()()(),e(9,"div",7)(10,"div",8)(11,"div")(12,"h6",4),o(13,"Order Summary"),n(),e(14,"div",9)(15,"label",10),o(16,"Discount code / Promo code"),n(),e(17,"input",11),E("ngModelChange",function(c){return k(r.discountCode,c)||(r.discountCode=c),c}),m("blur",function(){return r.applyDiscount()}),n()(),e(18,"div",9)(19,"label",10),o(20,"Your Bonus card number"),n(),e(21,"div",12),d(22,"input",13),e(23,"button",14),o(24,"Apply"),n()()(),e(25,"ul",15)(26,"li",16)(27,"span"),o(28,"Subtotal"),n(),e(29,"span"),o(30),f(31,"currency"),n()(),e(32,"li",16)(33,"span"),o(34,"Estimated Tax"),n(),e(35,"span"),o(36),f(37,"currency"),n()(),d(38,"hr"),e(39,"li",17)(40,"span"),o(41,"Total"),n(),e(42,"span"),o(43),f(44,"currency"),n()()()(),e(45,"button",18),o(46," Checkout "),n()()()()()),t&2&&(s(7),P(r.cartItems),s(10),O("ngModel",r.discountCode),s(13),u(x(31,5,r.subtotal)),s(6),u(x(37,7,r.estimatedTax)),s(7),u(x(44,9,r.total)),s(2),_("routerLink",T(11,$,r.cartId)))},dependencies:[N,D,q,V,F,j],styles:[".cart-items[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}.cart-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee;padding:1rem 0;gap:1rem}.cart-item-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}.product-image[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain;border-radius:8px;background-color:#f8f9fa;flex-shrink:0}.product-details[_ngcontent-%COMP%]{min-width:0;flex:1}.product-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;line-height:1.2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.cart-item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-shrink:0;min-width:220px;justify-content:flex-end}.quantity-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex-shrink:0}.quantity-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;display:flex;align-items:center;justify-content:center}.quantity-controls[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:30px;text-align:center}.cart-item-actions[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;min-width:60px;text-align:right}.cart-item-actions[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{width:32px;height:32px;padding:0;display:flex;align-items:center;justify-content:center}.cart-items[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.cart-items[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ccc;border-radius:4px}@media (max-width: 768px){.cart-item[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.cart-item-info[_ngcontent-%COMP%]{width:100%}.cart-item-actions[_ngcontent-%COMP%]{width:100%;justify-content:space-between;min-width:0}.product-details[_ngcontent-%COMP%]{max-width:none}}@media (max-width: 400px){.cart-item-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.75rem;justify-content:flex-start}.quantity-controls[_ngcontent-%COMP%]{order:1;flex:1}.cart-item-actions[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{order:2;text-align:left}.cart-item-actions[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{order:3}}"]})};export{H as CartComponent};
