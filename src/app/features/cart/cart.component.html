<section class="container my-5">
  <div
    class="row justify-content-center align-items-stretch"
    style="min-height: 70vh"
  >
    <!-- ðŸ›’ Shopping Cart -->
    <div class="col-lg-7 mb-4 mb-lg-0 d-flex">
      <div
        class="cart-items p-4 bg-white rounded shadow-sm border w-100 d-flex flex-column"
      >
        <h5 class="fw-semibold mb-4">Shopping Cart</h5>

        <!-- Scrollable List of Items -->
        <div class="flex-grow-1 overflow-auto">
          @for (item of cartItems; track item._id) {
          <div class="cart-item">
            <!-- Product Info -->
            <div class="cart-item-info">
              <img
                [src]="item.product.imageCover"
                [alt]="item.product.title"
                class="product-image"
              />
              <div class="product-details">
                <p class="product-title fw-semibold">
                  {{ item.product.title }}
                </p>
                <small class="text-muted d-block"
                  >#{{ item.product._id }}</small
                >
              </div>
            </div>

            <!-- Actions -->
            <div class="cart-item-actions">
              <div class="quantity-controls">
                <button
                  class="btn btn-outline-secondary btn-sm"
                  (click)="decCount(item.product._id, item.count)"
                >
                  <i class="fa-solid fa-minus"></i>
                </button>
                <span>{{ item.count }}</span>
                <button
                  (click)="incCount(item.product._id, item.count)"
                  class="btn btn-outline-secondary btn-sm"
                >
                  <i class="fa-solid fa-plus"></i>
                </button>
              </div>
              <h6 class="fw-semibold">${{ item.price }}</h6>
              <button
                (click)="deleteFromCart(item.product._id)"
                class="btn btn-link text-dark"
              >
                <i class="fa-solid fa-trash"></i>
              </button>
            </div>
          </div>
          }
        </div>
      </div>
    </div>

    <!--  Order Summary -->
    <div class="col-lg-4 d-flex">
      <div
        class="order-summary p-4 rounded shadow-sm border bg-light-subtle w-100 d-flex flex-column justify-content-between"
      >
        <div>
          <h6 class="fw-semibold mb-4">Order Summary</h6>

          <!-- Promo Code -->
          <div class="mb-3">
            <label class="form-label small text-muted"
              >Discount code / Promo code</label
            >
            <input
              [(ngModel)]="discountCode"
              type="text"
              class="form-control rounded-3"
              placeholder="ANG25OFF"
              (blur)="applyDiscount()"
            />
          </div>

          <!-- Bonus Card -->
          <div class="mb-3">
            <label class="form-label small text-muted"
              >Your Bonus card number</label
            >
            <div class="input-group">
              <input
                type="text"
                class="form-control rounded-start-3"
                placeholder="Enter Card Number"
              />
              <button class="btn btn-outline-dark rounded-end-3">Apply</button>
            </div>
          </div>

          <!-- Totals -->
          <ul class="list-unstyled small mb-4 mt-4">
            <li class="d-flex justify-content-between mb-2">
              <span>Subtotal</span>
              <span>{{ subtotal | currency }}</span>
            </li>
            <li class="d-flex justify-content-between mb-2">
              <span>Estimated Tax</span>
              <span>{{ estimatedTax | currency }}</span>
            </li>
            <!-- <li class="d-flex justify-content-between mb-2">
              <span>Estimated Shipping & Handling</span>
              <span>{{ shippingHandling | currency }}</span>
            </li> -->
            <hr />
            <li class="d-flex justify-content-between fw-semibold">
              <span>Total</span>
              <span>{{ total | currency }}</span>
            </li>
          </ul>
        </div>

        <button
          [routerLink]="['/checkout', cartId]"
          class="btn btn-dark w-100 py-2 rounded-3 fw-semibold"
        >
          Checkout
        </button>
      </div>
    </div>
  </div>
</section>
