import{a as w}from"./chunk-SQRCVYZV.js";import{a as S}from"./chunk-ZPB4TSYO.js";import{d as y}from"./chunk-AX2TRS6R.js";import{h as M,n as h}from"./chunk-6I4EYFNQ.js";import{Eb as p,Mb as o,Nb as _,Ob as s,Pb as P,Ra as b,Ub as v,Va as r,Wa as g,e as C,ga as O,hb as m,kb as f,ob as l,rb as x,sb as u,tb as i,ub as n,vb as c}from"./chunk-AHPHJBHB.js";var I=(a,t)=>t._id;function k(a,t){a&1&&(i(0,"div",4)(1,"div",7)(2,"span",8),o(3,"Loading..."),n()(),i(4,"p",9),o(5,"Loading your orders..."),n()())}function R(a,t){a&1&&(i(0,"div",5),c(1,"i",10),i(2,"h3"),o(3,"No Orders Yet"),n(),i(4,"p"),o(5,"You haven't placed any orders yet."),n(),i(6,"a",11),o(7,"Start Shopping"),n()())}function T(a,t){if(a&1&&(i(0,"span",44),o(1),n()),a&2){let e=p().$implicit;r(),s("Subtotal: ",e.price*e.count," EGP")}}function D(a,t){if(a&1&&(i(0,"div",23)(1,"div",34),c(2,"img",35),n(),i(3,"div",36)(4,"h4",37),o(5),n(),i(6,"div",38)(7,"span",39),c(8,"i",40),o(9),n(),i(10,"span",41),o(11),n()()(),i(12,"div",42)(13,"span",43),o(14),n(),m(15,T,2,1,"span",44),n()()),a&2){let e=t.$implicit;r(2),f("src",e.product.imageCover,b)("alt",e.product.title),r(3),_(e.product.title),r(4),s(" ",e.product.brand.name," "),r(2),s("Qty: ",e.count,""),r(3),s("",e.price," EGP"),r(),l(e.count>1?15:-1)}}function L(a,t){a&1&&(i(0,"span",32),o(1,"Paid"),n())}function F(a,t){if(a&1&&(i(0,"div",33),c(1,"i",45),i(2,"span"),o(3),n()()),a&2){let e=p().$implicit;r(3),P("",e.shippingAddress.city,", ",e.shippingAddress.details,"")}}function j(a,t){if(a&1&&(i(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"span",16),o(5,"Order ID:"),n(),i(6,"span",17),o(7),n()(),i(8,"div",18),c(9,"i",19),o(10),n()(),i(11,"div",20)(12,"span",21),o(13),n()()(),i(14,"div",22),x(15,D,16,7,"div",23,I),n(),i(17,"div",24)(18,"div",25)(19,"span",26),o(20,"Subtotal:"),n(),i(21,"span",27),o(22),n()(),i(23,"div",25)(24,"span",26),o(25,"Shipping:"),n(),i(26,"span",27),o(27),n()(),i(28,"div",25)(29,"span",26),o(30,"Tax (10%):"),n(),i(31,"span",27),o(32),n()(),i(33,"div",28)(34,"span",26),o(35,"Total:"),n(),i(36,"span",27),o(37),n()()(),i(38,"div",29)(39,"div",30),c(40,"i",31),i(41,"span"),o(42),n(),m(43,L,2,0,"span",32),n(),m(44,F,4,2,"div",33),n()()),a&2){let e=t.$implicit,d=p(2);r(7),s("",e._id.substring(0,12),"..."),r(3),s(" ",d.formatDate(e.createdAt)," "),r(2),f("ngClass",d.getStatusClass(e)),r(),s(" ",d.getOrderStatus(e)," "),r(2),u(e.cartItems),r(7),s("",d.getSubtotal(e)," EGP"),r(5),s("",d.getShipping(e)," EGP"),r(5),s("",d.getTax(e)," EGP"),r(5),s("",d.getTotal(e)," EGP"),r(5),_(e.paymentMethodType==="card"?"Card Payment":"Cash on Delivery"),r(),l(e.isPaid?43:-1),r(),l(e.shippingAddress?44:-1)}}function A(a,t){if(a&1&&(i(0,"div",6),x(1,j,45,11,"div",12,I),n()),a&2){let e=p();r(),u(e.orders)}}var E=class a{constructor(t,e){this._OrdersService=t;this._cartService=e}userId="";orders=[];isLoading=!0;subscriptions=new C;ngOnInit(){this.getUserIdAndLoadOrders()}ngOnDestroy(){this.subscriptions.unsubscribe()}getUserIdAndLoadOrders(){let t=localStorage.getItem("userToken");if(t){let e=JSON.parse(atob(t.split(".")[1]));this.userId=e.id,this.loadAllOrders()}}loadAllOrders(){this.isLoading=!0;let t=this._OrdersService.getUserOrders(this.userId).subscribe({next:e=>{console.log("User Orders:",e),this.orders=e,this.isLoading=!1},error:e=>{console.error("Error loading orders:",e),this.isLoading=!1}});this.subscriptions.add(t)}formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getOrderStatus(t){return t.isDelivered?"Delivered":t.isPaid?"Processing":"Pending Payment"}getStatusClass(t){return t.isDelivered?"status-delivered":t.isPaid?"status-processing":"status-pending"}getSubtotal(t){return t.cartItems.reduce((e,d)=>e+d.price*d.count,0)}getTax(t){let e=this.getSubtotal(t);return Number((e*.1).toFixed(2))}getShipping(t){return t.shippingPrice||0}getTotal(t){let e=this.getSubtotal(t),d=this.getShipping(t),z=this.getTax(t);return Number((e+d+z).toFixed(2))}static \u0275fac=function(e){return new(e||a)(g(w),g(S))};static \u0275cmp=O({type:a,selectors:[["app-receipt"]],standalone:!0,features:[v],decls:9,vars:3,consts:[[1,"orders-container"],[1,"page-header"],[1,"page-title"],[1,"page-subtitle"],[1,"loading-state"],[1,"empty-state"],[1,"orders-list"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"mt-3"],[1,"bi","bi-bag-x"],["routerLink","/products",1,"btn","btn-primary"],[1,"order-card"],[1,"order-header"],[1,"order-info"],[1,"order-id"],[1,"label"],[1,"value"],[1,"order-date"],[1,"bi","bi-calendar3"],[1,"order-status"],[1,"status-badge",3,"ngClass"],[1,"order-items"],[1,"order-item"],[1,"order-summary"],[1,"summary-row"],[1,"summary-label"],[1,"summary-value"],[1,"summary-row","total"],[1,"order-footer"],[1,"payment-method"],[1,"bi","bi-credit-card"],[1,"paid-badge"],[1,"shipping-address"],[1,"item-image"],[3,"src","alt"],[1,"item-details"],[1,"item-title"],[1,"item-meta"],[1,"item-brand"],[1,"bi","bi-tag"],[1,"item-quantity"],[1,"item-price"],[1,"price"],[1,"subtotal"],[1,"bi","bi-geo-alt"]],template:function(e,d){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"My Orders"),n(),i(4,"p",3),o(5,"View and track all your orders"),n()(),m(6,k,6,0,"div",4)(7,R,8,0,"div",5)(8,A,3,0,"div",6),n()),e&2&&(r(6),l(d.isLoading?6:-1),r(),l(!d.isLoading&&d.orders.length===0?7:-1),r(),l(!d.isLoading&&d.orders.length>0?8:-1))},dependencies:[h,M,y],styles:[".orders-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center}.page-title[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1a1a1a;margin-bottom:.5rem}.page-subtitle[_ngcontent-%COMP%]{font-size:16px;color:#666;margin-bottom:0}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:#666}.spinner-border[_ngcontent-%COMP%]{width:3rem;height:3rem;border-width:.3rem;color:#000}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:80px;color:#ccc;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a1a1a;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#666;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#000;border-color:#000;padding:.75rem 2rem;font-weight:600}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#333;border-color:#333}.orders-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.order-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden;transition:box-shadow .3s ease}.order-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem 1.5rem;background:#f8f8f8;border-bottom:1px solid #e0e0e0}.order-info[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-wrap:wrap}.order-id[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.order-id[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#999;font-weight:500;text-transform:uppercase;letter-spacing:.5px}.order-id[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#1a1a1a;font-weight:600;font-family:monospace}.order-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:14px;color:#666}.order-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.4rem 1rem;font-size:12px;font-weight:600;border-radius:4px;text-transform:uppercase;letter-spacing:.5px}.status-delivered[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status-processing[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.status-pending[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}.order-items[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;gap:1rem}.order-item[_ngcontent-%COMP%]{display:flex;gap:1rem;padding-bottom:1rem;border-bottom:1px solid #f0f0f0}.order-item[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}.item-image[_ngcontent-%COMP%]{flex-shrink:0;width:80px;height:80px;border-radius:4px;overflow:hidden;background:#f5f5f5}.item-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.item-details[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;justify-content:center}.item-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1a1a1a;margin-bottom:.5rem;line-height:1.4;line-clamp:2;text-overflow:ellipsis;overflow:hidden}.item-meta[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.item-brand[_ngcontent-%COMP%], .item-quantity[_ngcontent-%COMP%]{font-size:13px;color:#666;display:flex;align-items:center;gap:.25rem}.item-brand[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.item-price[_ngcontent-%COMP%]{flex-shrink:0;display:flex;flex-direction:column;align-items:flex-end;justify-content:center;gap:.25rem}.item-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#1a1a1a}.item-price[_ngcontent-%COMP%]   .subtotal[_ngcontent-%COMP%]{font-size:13px;color:#666}.order-summary[_ngcontent-%COMP%]{padding:1.5rem;background:#f8f8f8;border-top:1px solid #e0e0e0;display:flex;flex-direction:column;gap:.75rem}.summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:14px}.summary-label[_ngcontent-%COMP%]{color:#666;font-weight:500}.summary-value[_ngcontent-%COMP%]{color:#1a1a1a;font-weight:600}.summary-row.total[_ngcontent-%COMP%]{padding-top:.75rem;border-top:1px solid #e0e0e0;font-size:16px}.summary-row.total[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%], .summary-row.total[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{color:#000;font-weight:700}.order-footer[_ngcontent-%COMP%]{padding:1.25rem 1.5rem;background:#fff;border-top:1px solid #e0e0e0;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.payment-method[_ngcontent-%COMP%], .shipping-address[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:14px;color:#666}.payment-method[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .shipping-address[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#999}.paid-badge[_ngcontent-%COMP%]{display:inline-block;padding:.2rem .6rem;background-color:#d4edda;color:#155724;font-size:11px;font-weight:600;border-radius:3px;text-transform:uppercase;margin-left:.5rem}@media (max-width: 768px){.orders-container[_ngcontent-%COMP%]{padding:1rem}.page-title[_ngcontent-%COMP%]{font-size:24px}.page-subtitle[_ngcontent-%COMP%]{font-size:14px}.order-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem;padding:1rem}.order-info[_ngcontent-%COMP%]{gap:1rem;width:100%}.order-items[_ngcontent-%COMP%]{padding:1rem}.order-item[_ngcontent-%COMP%]{flex-direction:column}.item-image[_ngcontent-%COMP%]{width:100%;height:200px}.item-price[_ngcontent-%COMP%]{align-items:flex-start}.order-summary[_ngcontent-%COMP%]{padding:1rem}.order-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:1rem}.payment-method[_ngcontent-%COMP%], .shipping-address[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){.page-title[_ngcontent-%COMP%]{font-size:20px}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}.item-title[_ngcontent-%COMP%]{font-size:14px}.item-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:16px}}"]})};export{E as ReceiptComponent};
