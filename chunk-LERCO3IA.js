import{a as q}from"./chunk-NADYKXAY.js";import{b as T,c as _,d as V,e as D,f as z,g as x,i as R,k as j,l as G,s as $}from"./chunk-3EQ36NFA.js";import{a as w,c as F,d as E,e as I,i as N}from"./chunk-AX2TRS6R.js";import{i as S,n as y}from"./chunk-6I4EYFNQ.js";import{Db as c,Eb as m,Mb as o,Nb as f,Ub as P,Va as a,Wa as v,e as A,ga as O,hb as h,kb as b,mb as k,ob as M,qa as u,ra as g,tb as i,ub as n,vb as s,zb as C}from"./chunk-AHPHJBHB.js";function H(l,r){if(l&1){let e=C();i(0,"div",12),c("click",function(){let d=u(e).$implicit,p=m();return g(p.selectAddress(d._id))}),i(1,"div",13)(2,"div",14),s(3,"input",15),n(),i(4,"div",16)(5,"div",17)(6,"div",18)(7,"h5",19),o(8),n(),i(9,"span",20),o(10),n()(),i(11,"p",21),o(12),n(),i(13,"p",22),o(14),n()(),i(15,"div",23)(16,"button",24),c("click",function(){let d=u(e).$implicit,p=m();return g(p.deleteAddress(d._id))}),s(17,"i",25),n()()(),i(18,"div",26)(19,"button",27),c("click",function(d){let p=u(e).$implicit;return m().editAddress(p._id),g(d.stopPropagation())}),s(20,"i",28),n(),i(21,"button",29),c("click",function(d){let p=u(e).$implicit;return m().deleteAddress(p._id),g(d.stopPropagation())}),s(22,"i",30),n()()()()}if(l&2){let e=r.$implicit,t=m();k("selected",t.selectedAddressId===e._id),a(3),b("id","address-"+e._id)("checked",t.selectedAddressId===e._id)("value",e._id),a(5),f(e.city),a(2),f(e.name),a(2),f(e.details),a(2),f(e.phone)}}function J(l,r){if(l&1){let e=C();i(0,"form",31),c("ngSubmit",function(){u(e);let d=m();return g(d.onSubmit())}),i(1,"div",32)(2,"label",33),o(3,"Type of Address"),n(),s(4,"input",34),n(),i(5,"div",32)(6,"label",35),o(7,"City"),n(),s(8,"input",36),n(),i(9,"div",32)(10,"label",37),o(11,"Details"),n(),s(12,"textarea",38),n(),i(13,"div",32)(14,"label",39),o(15,"Phone"),n(),s(16,"input",40),n(),i(17,"button",41),o(18," Add Address "),n()()}if(l&2){let e=m();b("formGroup",e.addForm)}}var L=class l{constructor(r,e,t){this.addressService=r;this.route=e;this.router=t}addresses=[];selectedAddressId=null;addFormOpen=!1;cartId=null;subscriptions=new A;addForm=new z({name:new x("",_.required),city:new x("",_.required),details:new x("",_.required),phone:new x("",[_.required])});onSubmit(){if(this.addForm.valid){let r={name:this.addForm.value.name,city:this.addForm.value.city,details:this.addForm.value.details,phone:this.addForm.value.phone},e=this.addressService.addAddress(r).subscribe({next:t=>{console.log("Address added successfully:",t),this.loadAddresses(),this.addForm.reset(),this.addFormOpen=!1},error:t=>{console.error("Error adding address:",t)}});this.subscriptions.add(e)}else console.log("Form is invalid"),Object.keys(this.addForm.controls).forEach(r=>{this.addForm.get(r)?.markAsTouched()})}openAddForm(){this.addFormOpen=!0}closeAddForm(){this.addForm.reset(),this.addFormOpen=!1}ngOnInit(){let r=this.route.parent?.paramMap.subscribe(e=>{this.cartId=e.get("cartId"),console.log("Cart ID in address component:",this.cartId)});r&&this.subscriptions.add(r),this.loadAddresses()}ngOnDestroy(){this.subscriptions.unsubscribe()}loadAddresses(){let r=this.addressService.getAddresses().subscribe({next:e=>{this.addresses=e.data,console.log("Addresses loaded:",this.addresses)},error:e=>{console.error("Error loading addresses:",e)}});this.subscriptions.add(r)}selectAddress(r){this.selectedAddressId=r}editAddress(r){console.log("Edit address:",r)}deleteAddress(r){let e=this.addressService.deleteAddress(r).subscribe({next:t=>{console.log("Address deleted:",t),this.loadAddresses()},error:t=>{console.error("Error deleting address:",t)}});this.subscriptions.add(e)}goBack(){this.router.navigate(["/cart"])}proceedToNext(){this.selectedAddressId&&(this.router.navigate(["../shipping",this.selectedAddressId],{relativeTo:this.route}),console.log("Navigating to shipping with address ID:",this.selectedAddressId))}static \u0275fac=function(e){return new(e||l)(v(q),v(w),v(F))};static \u0275cmp=O({type:l,selectors:[["app-address"]],standalone:!0,features:[P],decls:15,vars:3,consts:[[1,"address-container"],[1,"address-content"],[1,"section-title","mb-4"],[1,"addresses-list"],["class","address-card mb-3",3,"selected","click",4,"ngFor","ngForOf"],[1,"add-address-section"],[1,"btn-add-address",3,"click"],[1,"fa-solid","fa-circle-plus"],[3,"formGroup"],[1,"navigation-buttons","mt-5"],[1,"btn","btn-back",3,"click"],["routerLink","/checkout/shipping","routerLinkActive","active",1,"btn","btn-next",3,"click","disabled"],[1,"address-card","mb-3",3,"click"],[1,"d-flex","align-items-start"],[1,"address-radio"],["type","radio","name","selectedAddress",1,"form-check-input",3,"id","checked","value"],[1,"address-details","flex-grow-1","d-flex","justify-content-between","align-items-center"],[1,"details"],[1,"d-flex","align-items-center","mb-2"],[1,"address-name","mb-0"],[1,"address-type-badge","ms-2"],[1,"address-text","mb-1"],[1,"address-phone","mb-0"],[1,"actions"],[1,"btn",3,"click"],[1,"fa-solid","fa-circle-minus"],[1,"address-actions"],["title","Edit address",1,"btn-action","btn-edit",3,"click"],[1,"bi","bi-pencil"],["title","Delete address",1,"btn-action","btn-delete","ms-2",3,"click"],[1,"bi","bi-x-lg"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","city",1,"form-label"],["type","text","id","city","formControlName","city",1,"form-control"],["for","details",1,"form-label"],["id","details","formControlName","details",1,"form-control"],["for","phone",1,"form-label"],["type","text","id","phone","formControlName","phone",1,"form-control"],["type","submit",1,"btn",2,"background-color","#000","color","#fff"]],template:function(e,t){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),o(3,"Select Address"),n(),i(4,"div",3),h(5,H,23,9,"div",4),n(),i(6,"div",5)(7,"button",6),c("click",function(){return t.openAddForm()}),s(8,"i",7),n()(),h(9,J,19,1,"form",8),i(10,"div",9)(11,"button",10),c("click",function(){return t.goBack()}),o(12,"Back"),n(),i(13,"button",11),c("click",function(){return t.proceedToNext()}),o(14," Next "),n()()()()),e&2&&(a(5),b("ngForOf",t.addresses),a(4),M(t.addFormOpen?9:-1),a(4),b("disabled",!t.selectedAddressId))},dependencies:[y,S,N,E,I,$,R,T,V,D,j,G],styles:[".address-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem 1rem}.section-title[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#1a1a1a;margin-bottom:1.5rem}.addresses-list[_ngcontent-%COMP%]{margin-bottom:2rem}.address-card[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;padding:1.5rem;cursor:pointer;transition:all .3s ease;border:2px solid transparent}.address-card[_ngcontent-%COMP%]:hover{background:#ebebeb}.address-card.selected[_ngcontent-%COMP%]{background:#fff;border-color:#000}.address-radio[_ngcontent-%COMP%]{margin-right:1rem;padding-top:.25rem}.address-radio[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid #999;cursor:pointer}.address-radio[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#000;border-color:#000}.address-details[_ngcontent-%COMP%]{flex-grow:1}.address-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1a1a1a}.address-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;background-color:#000;color:#fff;font-size:11px;font-weight:600;border-radius:4px;text-transform:uppercase;letter-spacing:.5px}.address-text[_ngcontent-%COMP%]{font-size:14px;color:#666;line-height:1.5}.address-phone[_ngcontent-%COMP%]{font-size:14px;color:#666}.address-actions[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.btn-action[_ngcontent-%COMP%]{background:transparent;border:none;padding:.5rem;cursor:pointer;transition:all .2s ease;font-size:16px;display:flex;align-items:center;justify-content:center}.btn-edit[_ngcontent-%COMP%]{color:#666}.btn-edit[_ngcontent-%COMP%]:hover{color:#000}.btn-delete[_ngcontent-%COMP%]{color:#666}.btn-delete[_ngcontent-%COMP%]:hover{color:#dc3545}.add-address-section[_ngcontent-%COMP%]{padding:2rem 0;border-top:1px dashed #ccc;text-align:center}.btn-add-address[_ngcontent-%COMP%]{background:transparent;border:none;color:#666;font-size:16px;font-weight:500;cursor:pointer;transition:all .3s ease;display:inline-flex;align-items:center}.btn-add-address[_ngcontent-%COMP%]:hover{color:#000}.btn-add-address[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.navigation-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}.btn-back[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{flex:1;padding:.875rem 2rem;font-size:16px;font-weight:600;border-radius:4px;border:none;cursor:pointer;transition:all .3s ease}.btn-back[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:2px solid #e0e0e0}.btn-back[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#ccc}.btn-next[_ngcontent-%COMP%]{background-color:#000;color:#fff}.btn-next[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#333}.btn-next[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed;opacity:.6}@media (max-width: 768px){.address-container[_ngcontent-%COMP%]{padding:1rem}.section-title[_ngcontent-%COMP%]{font-size:20px}.address-card[_ngcontent-%COMP%]{padding:1rem}.address-name[_ngcontent-%COMP%]{font-size:16px}.address-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.btn-action[_ngcontent-%COMP%]{padding:.25rem}.navigation-buttons[_ngcontent-%COMP%]{flex-direction:column}.btn-back[_ngcontent-%COMP%], .btn-next[_ngcontent-%COMP%]{width:100%}}"]})};export{L as AddressComponent};
