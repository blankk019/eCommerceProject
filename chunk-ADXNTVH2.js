import{a as x}from"./chunk-L7S2QYTS.js";import{b as T,c as f,d as N,e as A,f as k,g as w,i as R,k as q,l as D,s as G}from"./chunk-K6OF5756.js";import{l as V}from"./chunk-P4ENQPUO.js";import{c as E,d as L}from"./chunk-SBTNA2EE.js";import{h as y}from"./chunk-BOADIA42.js";import{Cb as b,Db as C,Lb as s,Tb as S,Va as m,Vb as v,ca as _,ga as h,hb as p,kb as c,ob as g,sb as r,tb as t,ub as F}from"./chunk-LPR7IXKC.js";var P=(i,n)=>({"is-valid":i,"is-invalid":n});function j(i,n){i&1&&(r(0,"p",12),s(1,"Email is Required"),t())}function I(i,n){i&1&&(r(0,"p",12),s(1,"Enter Valid Email"),t())}function U(i,n){if(i&1&&(r(0,"div",5),p(1,j,2,0,"p",12)(2,I,2,0,"p",12),t()),i&2){let o,e=C();m(),g((o=e.loginForm.get("email"))!=null&&o.getError("required")?1:(o=e.loginForm.get("email"))!=null&&o.getError("email")?2:-1)}}function $(i,n){i&1&&(r(0,"p",12),s(1,"password is Required"),t())}function z(i,n){i&1&&(r(0,"p",12),s(1,"Enter Valid Password"),t())}function B(i,n){if(i&1&&(r(0,"div",5),p(1,$,2,0,"p",12)(2,z,2,0,"p",12),t()),i&2){let o,e=C();m(),g((o=e.loginForm.get("password"))!=null&&o.getError("required")?1:(o=e.loginForm.get("password"))!=null&&o.getError("pattern")?2:-1)}}function H(i,n){i&1&&F(0,"span",11)}var M=class i{_AuthService=_(x);_Router=_(E);_ToastrService=_(V);isLoading=!1;loginForm=new k({email:new w(null,[f.required,f.email]),password:new w(null,[f.required,f.pattern(/^\w{6,}$/)])});login(){this.loginForm.valid?(this.isLoading=!0,this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:n=>{console.log(n),n.message==="success"&&(this._ToastrService.success("Logged in successfully!","Cyber"),setTimeout(()=>{localStorage.setItem("userToken",n.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},1500)),this.isLoading=!1}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=h({type:i,selectors:[["app-login"]],standalone:!0,features:[S],decls:20,vars:13,consts:[[1,"text-main","mb-5"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label","fw-semibold"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","mt-1"],["for","password",1,"form-label","fw-semibold"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end"],["routerLink","/forgot-password",1,"link-primary"],["type","submit",1,"btn","text-white","d-block","ms-auto","bg-main",3,"disabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"m-0"]],template:function(o,e){if(o&1&&(r(0,"section")(1,"h2",0),s(2,"Login Now :"),t(),r(3,"form",1),b("ngSubmit",function(){return e.login()}),r(4,"div",2)(5,"label",3),s(6,"Email"),t(),F(7,"input",4),p(8,U,3,1,"div",5),t(),r(9,"div",2)(10,"label",6),s(11,"Password"),t(),F(12,"input",7),p(13,B,3,1,"div",5),t(),r(14,"div",8)(15,"a",9),s(16,"Forgot Password?"),t(),r(17,"button",10),s(18,` login
`),p(19,H,1,0,"span",11),t()()()()),o&2){let l,d,a,u;m(3),c("formGroup",e.loginForm),m(4),c("ngClass",v(7,P,!((l=e.loginForm.get("email"))!=null&&l.errors)&&(((l=e.loginForm.get("email"))==null?null:l.touched)||((l=e.loginForm.get("email"))==null?null:l.dirty)),((l=e.loginForm.get("email"))==null?null:l.errors)&&(((l=e.loginForm.get("email"))==null?null:l.touched)||((l=e.loginForm.get("email"))==null?null:l.dirty)))),m(),g((d=e.loginForm.get("email"))!=null&&d.errors&&((d=e.loginForm.get("email"))!=null&&d.touched||(d=e.loginForm.get("email"))!=null&&d.dirty)?8:-1),m(4),c("ngClass",v(10,P,!((a=e.loginForm.get("password"))!=null&&a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)),((a=e.loginForm.get("password"))==null?null:a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)))),m(),g((u=e.loginForm.get("password"))!=null&&u.errors&&((u=e.loginForm.get("password"))!=null&&u.touched||(u=e.loginForm.get("password"))!=null&&u.dirty)?13:-1),m(4),c("disabled",e.loginForm.invalid||e.isLoading),m(2),g(e.isLoading?19:-1)}},dependencies:[G,R,T,N,A,q,D,y,L]})};export{M as LoginComponent};
